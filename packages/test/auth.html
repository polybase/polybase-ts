<html>
  <script src="../auth/dist/bundle.min.js"></script>
  <title>Test @polybase/auth</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    h3 {
      margin: 0;
      padding-bottom: 3px;
    }

    div {
      margin-bottom: 15px;
    }
  </style>
  <script>
    let auth = new polybase_auth.Auth({
      url: 'http://localhost:3000'
    })

    auth.onAuthUpdate((auth) => {
      console.log('auth', auth)
      if (!document.getElementById('auth')) return
      document.getElementById('auth').innerText = 'Auth: ' + auth?.type ?? 'No auth'
    })

    async function login () {  
      const res = await auth.signIn()
      console.log('login', res)
    }

    async function sign () {
      const signed = await auth.ethPersonalSign(document.getElementById('input').value)
      document.getElementById('signed').innerText = 'Signed: ' + signed
    }
  </script>
  <body>
    <div>
      <h3>Sign In</h3>
      <button onclick="login()">Login</button>
      <div id="auth">Auth: </div>
    </div>
    <div>
      <h3>Ethereum Personal Sign</h3>
      <input id="input" value="Hello World" />
      <button onclick="sign()">Sign</button>
      <div id="signed"></div>
    </div>
  </body>
</html>